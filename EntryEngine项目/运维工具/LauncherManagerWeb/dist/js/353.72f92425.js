"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[353],{5471:function(e,t,o){o.d(t,{Z:function(){return y}});var s=o(3396),i=o(9242),l=o(7139);const n=e=>((0,s.dD)("data-v-d9de0d1c"),e=e(),(0,s.Cn)(),e),h={class:"float-btn"},a={class:"btn-list"},r=n((()=>(0,s._)("span",null,"置顶",-1))),c=[r],d=["onClick"],u=n((()=>(0,s._)("span",null,"触底",-1))),p=[u];function m(e,t,o,n,r,u){const m=(0,s.up)("van-icon");return(0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",a,[(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"btn",key:"float-btn-top",onClick:t[0]||(t[0]=(0,i.iM)((e=>u.choose("goTop")),["stop"]))},c)),[[i.F8,o.goTop]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.showList,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"btn",key:"float-btn-"+t,onClick:(0,i.iM)((o=>u.choose(t,e)),["stop"])},[(0,s._)("span",null,(0,l.zw)(e),1)],8,d)))),128)),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"btn",key:"float-btn-bottom",onClick:t[1]||(t[1]=(0,i.iM)((e=>u.choose("goBottom")),["stop"]))},p)),[[i.F8,o.goBottom]])]),(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"btn",key:"float-btn-more",onClick:t[2]||(t[2]=(0,i.iM)((e=>r.showMore=!r.showMore),["stop"]))},[(0,s.Wm)(m,{name:r.showMore?"arrow-up":"arrow-down"},null,8,["name"])])),[[i.F8,u.hidden]])])}var f={components:{},props:{list:Array,showNum:{type:Number,default:3},goTop:Boolean,goBottom:Boolean},data(){return{showMore:!1}},computed:{hidden(){return this.list&&this.list.length>this.showNum},showList(){let e=[],t=this.list?this.list.length:0;!this.showMore&&this.showNum<t&&(t=this.showNum);for(let o=0;o<t;o++)e.push(this.list[o]);return e}},methods:{choose(e,t){this.$emit("choose",e,t)}},mounted(){}},g=o(89);const w=(0,g.Z)(f,[["render",m],["__scopeId","data-v-d9de0d1c"]]);var y=w},97:function(e,t,o){o.d(t,{Z:function(){return g}});var s=o(3396),i=o(9242),l=o(7139);const n={class:"table"},h={align:"left"},a={key:0,class:"selector"},r=["onClick"],c=["onClick"],d=["innerHTML"];function u(e,t,o,u,p,m){const f=(0,s.up)("van-checkbox");return(0,s.wg)(),(0,s.iD)("table",n,[(0,s._)("thead",null,[(0,s._)("tr",h,[o.choose?((0,s.wg)(),(0,s.iD)("th",a)):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.thead,((e,t)=>((0,s.wg)(),(0,s.iD)("th",{key:"thead-"+t,onClick:(0,i.iM)((e=>m.clickTile(t)),["stop"]),style:(0,l.j5)(o.theadStyle?o.theadStyle[t]:null)},(0,l.zw)(e),13,r)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.list,((e,n)=>((0,s.wg)(),(0,s.iD)("tr",{align:"left",valign:"top",key:"tbody-"+n,onClick:(0,i.iM)((t=>m.clickRow(e)),["stop"])},[o.choose?((0,s.wg)(),(0,s.iD)("td",{key:0,onClick:t[0]||(t[0]=(0,i.iM)((()=>{}),["stop"])),style:{padding:"0"}},[(0,s.Wm)(f,{style:{"justify-content":"center",padding:"10px 5px"},modelValue:p.chooseValues[n],"onUpdate:modelValue":e=>p.chooseValues[n]=e,onClick:(0,i.iM)((e=>m.onChoose(n)),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])])):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.tbody,((t,i)=>((0,s.wg)(),(0,s.iD)("td",{key:"tbody-td-"+i,innerHTML:e[t],style:(0,l.j5)(o.tbodyStyle?o.tbodyStyle[i]:null)},null,12,d)))),128))],8,c)))),128))])])}var p={components:{},props:{list:Array,option:Object,choose:{type:Number,default:0,validator:function(e){return[0,1,2].includes(e)}},theadStyle:Object,tbodyStyle:Object},data(){return{chooseValues:[],chooseList:[],nextChoose:null}},computed:{thead(){let e=[];for(const t in this.option)e.push(t);return e},tbody(){let e=[];for(const t in this.option)e.push(this.option[t]);return e},selected(){let e=[];for(let t=0;t<this.chooseValues.length;t++)this.chooseValues[t]&&e.push(this.list[t]);return e}},watch:{list:{handler:function(e){console.log("table",e)},deep:!0}},methods:{clickRow(e){this.$emit("clickRow",e)},onChoose(e){console.log("点击选择",e,this.chooseValues),1==this.choose&&(console.log("单选",this.nextChoose),this.nextChoose!=e&&(null!=this.nextChoose&&(this.chooseValues[this.nextChoose]=!1),this.nextChoose=e)),this.chooseList=[];for(const t in this.chooseValues)this.chooseValues[t]&&this.chooseList.push(t);this.$emit("chooseClick",this.chooseList),this.$forceUpdate()},initChooseValues(){let e=[];if(this.choose&&this.list.length)for(let t=0;t<this.list.length;t++,e.push(!1));this.chooseValues=e},clearChoose(){if(this.choose&&this.list.length)for(let e=0;e<this.list.length;e++)this.chooseValues[e]=!1;this.chooseList=[],this.$forceUpdate()},verifyChoose(e){return new Promise(((t,o)=>{this.chooseList.length?t():(this.$Toast(e||"请选择数据"),o())}))},clickTile(e){this.$emit("clickTile",e)}},mounted(){this.initChooseValues(),console.log("props---\x3e",this.$props)}},m=o(89);const f=(0,m.Z)(p,[["render",u],["__scopeId","data-v-73baa144"]]);var g=f},7353:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var s=o(3396);const i={class:"container"};function l(e,t,o,l,n,h){const a=(0,s.up)("van-nav-bar"),r=(0,s.up)("Table"),c=(0,s.up)("FloatBtn"),d=(0,s.up)("van-field"),u=(0,s.up)("van-form"),p=(0,s.up)("van-dialog");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(a,{title:"服务管理","left-arrow":"",onClickLeft:t[0]||(t[0]=t=>e.$router.go(-1)),style:{width:"100%"}}),(0,s.Wm)(r,{ref:"table",list:n.list,option:{"名称":"Name","SVN目录":"SVNPath"},choose:1,onChooseClick:h.chooseClick},null,8,["list","onChooseClick"]),(0,s.Wm)(c,{list:h.floatBtnList,onChoose:t[1]||(t[1]=e=>h.chooseFloatBtn(e))},null,8,["list"]),(0,s.Wm)(p,{show:n.dialog.show,"onUpdate:show":t[2]||(t[2]=e=>n.dialog.show=e),title:n.dialog.title,"before-close":h.dialogClose,"show-cancel-button":"",width:"15rem"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{onSubmit:e.onSubmit,ref:"from","label-width":"3.5rem"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.from,((e,t)=>((0,s.wg)(),(0,s.j4)(d,{key:"field-"+t,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,name:e.key,label:e.title,rules:e.rules,disabled:e.disabled,type:e.type},null,8,["modelValue","onUpdate:modelValue","name","label","rules","disabled","type"])))),128))])),_:1},8,["onSubmit"])])),_:1},8,["show","title","before-close"])])}var n=o(97),h=o(5471),a={components:{Table:n.Z,FloatBtn:h.Z},data(){return{list:[],dialog:{title:"添加",show:!1},from:[{title:"名称",key:"Name",value:"",disabled:!1,rules:[{required:!0,message:"请填写名称"}]},{title:"SVN目录",key:"SVNPath",value:"",disabled:!1,rules:[{required:!0,message:"请填写SVN目录"}]},{title:"SVN账号",key:"SVNUser",value:"",disabled:!1,rules:[{required:!0,message:"请填写SVN账号"}]},{title:"SVN密码",key:"SVNPassword",value:"",disabled:!1,rules:[{required:!0,message:"请填写SVN密码"}]},{title:"启动文件",key:"Exe",value:"",disabled:!1},{title:"启动命令",key:"LaunchCommand",value:"",disabled:!1,type:"textarea"}],selectRow:{}}},computed:{floatBtnList(){return[this.dialog.title,"删除"]}},methods:{getServiceType(){this.$IMBSProxy.GetServiceType((e=>{this.list=e}))},chooseFloatBtn(e){switch(e){case 0:if(console.log(this.dialog.type),"添加"==this.dialog.title)this.from=JSON.parse(JSON.stringify(this.$options.data().from));else for(const e in this.from)this.from[e].value=this.selectRow[this.from[e].key],e<4&&(this.from[e].disabled=!0),JSON.parse(JSON.stringify(this.from));this.dialog.show=!0;break;case 1:this.$refs.table.verifyChoose().then((()=>{this.$Dialog.confirm({message:"是否确定删除"}).then((()=>{this.$IMBSProxy.DeleteServiceType(this.selectRow.Name,(e=>{e&&(this.$Toast("删除成功"),this.getServiceType(),this.$refs.table.clearChoose(),this.reInit())}))})).catch((()=>{}))})).catch((()=>{}));break;default:break}},dialogClose(e){if("confirm"==e){let e=this.$refs.from.getValues();return new Promise((t=>{this.$IMBSProxy.ModifyServiceType(e,(e=>{e&&(this.$Toast(this.dialog.title+"成功"),this.dialog.show=!1,this.getServiceType(),this.$refs.table.clearChoose(),this.reInit())})).then((()=>t(!0))).catch((()=>t(!1)))}))}return!0},chooseClick(e){e.length?(this.selectRow=this.list[e[0]],this.dialog.title="修改"):this.reInit()},reInit(){this.selectRow=null,this.dialog.title="添加"}},mounted(){this.getServiceType()}},r=o(89);const c=(0,r.Z)(a,[["render",l],["__scopeId","data-v-d2ed186c"]]);var d=c}}]);